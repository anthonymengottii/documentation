---
title: "Webhooks"
api: "https://api.upay-sistema.onrender.com"
---

## Webhooks

Configure webhooks para receber notificações em tempo real sobre eventos importantes.

<Note>
  Para um guia completo sobre Webhooks, consulte [Webhooks Guide](/guides/features/webhooks).
</Note>

## Listar Assinaturas

<RequestExample>

```bash
curl -X GET "https://api.upay-sistema.onrender.com/api/webhooks/subscriptions" \
  -H "Authorization: Bearer SUA_API_KEY"
```

</RequestExample>

## Criar Assinatura

<RequestExample>

```bash
curl -X POST "https://api.upay-sistema.onrender.com/api/webhooks/subscriptions" \
  -H "Authorization: Bearer SUA_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://meusite.com.br/webhooks/upay",
    "events": ["payment.completed", "payment.failed"],
    "description": "Webhook para notificações de pagamento"
  }'
```

</RequestExample>

<ParamField body="url" type="string" required>
  URL do endpoint que receberá os webhooks
</ParamField>
<ParamField body="events" type="array" required>
  Array de eventos para assinar:
  - payment.completed
  - payment.failed
  - payment.pending
  - payment.refunded
  - payment.cancelled
  - payment_link.created
  - payment_link.updated
  - payment_link.deleted
  - product.created
  - product.updated
  - product.deleted
  - coupon.created
  - coupon.used
  - coupon.expired
</ParamField>
<ParamField body="description" type="string">
  Descrição da assinatura
</ParamField>

<ResponseField name="success" type="boolean">
  Indica se a requisição foi bem-sucedida
</ResponseField>
<ResponseField name="data" type="object">
  Dados da assinatura criada, incluindo o `secret` para validação
</ResponseField>

<Warning>
  Guarde o `secret` em local seguro. Ele será usado para validar as requisições do webhook usando HMAC-SHA256.
</Warning>

## Listar Eventos

<RequestExample>

```bash
curl -X GET "https://api.upay-sistema.onrender.com/api/webhooks/events?page=1&limit=20" \
  -H "Authorization: Bearer SUA_API_KEY"
```

</RequestExample>

## Atualizar Assinatura

<RequestExample>

```bash
curl -X PUT "https://api.upay-sistema.onrender.com/api/webhooks/subscriptions/{id}" \
  -H "Authorization: Bearer SUA_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://meusite.com.br/webhooks/upay-v2",
    "events": ["payment.completed", "payment.failed", "payment.refunded"],
    "status": "ACTIVE"
  }'
```

</RequestExample>

## Deletar Assinatura

<RequestExample>

```bash
curl -X DELETE "https://api.upay-sistema.onrender.com/api/webhooks/subscriptions/{id}" \
  -H "Authorization: Bearer SUA_API_KEY"
```

</RequestExample>

## Validação de Webhooks

Todas as requisições de webhook incluem o header `X-Upay-Signature` com uma assinatura HMAC-SHA256. Use o `secret` da assinatura para validar que a requisição veio da UPay.

<Card title="Guia Completo" icon="bell" href="/guides/features/webhooks">
  Aprenda mais sobre Webhooks e validação
</Card>

