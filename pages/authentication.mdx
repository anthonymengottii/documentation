---
title: "Autentica√ß√£o"
description: "Aprenda como obter e usar API Keys para autenticar suas requisi√ß√µes na API Upay. Guia completo com exemplos pr√°ticos"
---

## Vis√£o geral

A UPay Gateway API usa autentica√ß√£o baseada em **API Keys** (Bearer Token) para garantir que apenas usu√°rios autorizados possam acessar os recursos da API.

## Obtendo sua API Key

### Passo 1: Acesse o Dashboard

1. Fa√ßa login no [Dashboard UPay](https://app.upaybr.com)
2. Complete o processo de KYC (Know Your Customer) se ainda n√£o tiver feito
3. Navegue at√© **Configura√ß√µes ‚Üí Credenciais de API**

### Passo 2: Crie uma API Key

1. Clique em **"Criar Nova API Key"**
2. D√™ um nome descritivo para sua API Key (ex: "Integra√ß√£o Produ√ß√£o", "App Mobile")
3. Selecione as permiss√µes necess√°rias:
   - `paymentLinks:read` - Ler links de pagamento
   - `paymentLinks:write` - Criar/editar links de pagamento
   - `products:read` - Ler produtos
   - `products:write` - Criar/editar produtos
   - `coupons:read` - Ler cupons
   - `coupons:write` - Criar/editar cupons
   - `transactions:read` - Ler transa√ß√µes
   - `transactions:write` - Criar transa√ß√µes
   - `webhooks:read` - Ler webhooks
   - `webhooks:write` - Criar/editar webhooks

4. Clique em **"Gerar API Key"**
5. **‚ö†Ô∏è IMPORTANTE**: Copie e guarde sua API Key imediatamente. Ela n√£o ser√° exibida novamente!

<Warning>
  Nunca compartilhe sua API Key publicamente. Mantenha-a segura e use vari√°veis de ambiente ou servi√ßos de gerenciamento de secrets.
</Warning>

## üîë Usando sua API Key

### Header de Autentica√ß√£o

A API aceita autentica√ß√£o em dois formatos:

**Formato 1: Bearer Token (Recomendado)**
```
Authorization: Bearer SUA_API_KEY_AQUI
```

**Formato 2: X-API-Key Header**
```
X-API-Key: SUA_API_KEY_AQUI
```

Ambos os formatos s√£o aceitos. Recomendamos o uso do formato Bearer Token por ser mais padr√£o.

### Exemplo com cURL

```bash
curl -X GET "https://upay-sistema-api.onrender.com/api/v1/payment-links" \
  -H "Authorization: Bearer sua_api_key_aqui" \
  -H "Content-Type: application/json"
```

**Resposta de sucesso (200 OK):**
```json
{
  "data": [],
  "total": 0
}
```

### Exemplo com JavaScript (Fetch)

```javascript
const apiKey = 'sua_api_key_aqui';

const response = await fetch('https://upay-sistema-api.onrender.com/api/v1/payment-links', {
  method: 'GET',
  headers: {
    'Authorization': `Bearer ${apiKey}`,
    'Content-Type': 'application/json'
  }
});

const data = await response.json();
```

### Exemplo com Python (Requests)

```python
import requests

api_key = 'sua_api_key_aqui'
headers = {
    'Authorization': f'Bearer {api_key}',
    'Content-Type': 'application/json'
}

response = requests.get(
    'https://upay-sistema-api.onrender.com/api/v1/payment-links',
    headers=headers
)

data = response.json()
```

### Exemplo com Node.js (Axios)

```javascript
const axios = require('axios');

const apiKey = 'sua_api_key_aqui';

const response = await axios.get('https://upay-sistema-api.onrender.com/api/payment-links', {
  headers: {
    'Authorization': `Bearer ${apiKey}`,
    'Content-Type': 'application/json'
  }
});

console.log(response.data);
```

## Seguran√ßa

### Boas Pr√°ticas

1. **Nunca commite API Keys no c√≥digo**
   - Use vari√°veis de ambiente
   - Use servi√ßos de gerenciamento de secrets (AWS Secrets Manager, HashiCorp Vault, etc.)

2. **Use diferentes API Keys para diferentes ambientes**
   - Uma para desenvolvimento
   - Uma para produ√ß√£o
   - Facilita revoga√ß√£o se necess√°rio

3. **Revogue API Keys comprometidas imediatamente**
   - Acesse o Dashboard ‚Üí Configura√ß√µes ‚Üí Credenciais de API
   - Revogue a API Key comprometida
   - Gere uma nova API Key

4. **Use apenas as permiss√µes necess√°rias**
   - Siga o princ√≠pio do menor privil√©gio
   - N√£o conceda permiss√µes desnecess√°rias

5. **Rotacione suas API Keys periodicamente**
   - Recomendado a cada 90 dias
   - Facilita a detec√ß√£o de uso n√£o autorizado

### Vari√°veis de Ambiente

#### .env (Node.js/Python)

```env
UPAY_API_KEY=sua_api_key_aqui
UPAY_API_URL=https://upay-sistema-api.onrender.com/
```

#### Uso no c√≥digo

```javascript
// Node.js
const apiKey = process.env.UPAY_API_KEY;

// Python
import os
api_key = os.getenv('UPAY_API_KEY')
```

## Tratamento de erros

A API retorna c√≥digos HTTP padr√£o para indicar sucesso ou falha das requisi√ß√µes.

### C√≥digos de status HTTP

| C√≥digo | Descri√ß√£o |
|--------|-----------|
| `200` | Requisi√ß√£o bem-sucedida |
| `201` | Recurso criado com sucesso |
| `400` | Requisi√ß√£o inv√°lida (erro de valida√ß√£o) |
| `401` | N√£o autenticado (API Key inv√°lida ou ausente) |
| `403` | N√£o autorizado (sem permiss√£o para o recurso) |
| `404` | Recurso n√£o encontrado |
| `429` | Muitas requisi√ß√µes (rate limit excedido) |
| `500` | Erro interno do servidor |

### 401 Unauthorized

```json
{
  "error": "Unauthorized",
  "message": "Token inv√°lido ou expirado",
  "statusCode": 401
}
```

**Causas comuns:**
- API Key incorreta ou ausente
- Formato do header de autentica√ß√£o incorreto
- API Key revogada ou expirada

**Solu√ß√µes:**
- Verifique se a API Key est√° correta
- Verifique se est√° usando o formato `Bearer {api_key}`
- Verifique se a API Key n√£o foi revogada no dashboard

### 403 Forbidden

```json
{
  "error": "Forbidden",
  "message": "Voc√™ n√£o tem permiss√£o para acessar este recurso",
  "statusCode": 403
}
```

**Causas comuns:**
- API Key sem as permiss√µes necess√°rias
- Tentativa de acessar recurso de outro usu√°rio

**Solu√ß√µes:**
- Verifique se sua API Key tem as permiss√µes necess√°rias
- Entre em contato com o suporte para solicitar permiss√µes adicionais

### 400 Bad Request

```json
{
  "error": "Validation Error",
  "message": "Dados inv√°lidos",
  "statusCode": 400,
  "details": [
    {
      "field": "amount",
      "message": "O valor deve ser maior que 0"
    },
    {
      "field": "currency",
      "message": "Moeda inv√°lida. Use BRL"
    }
  ]
}
```

**Causas comuns:**
- Campos obrigat√≥rios ausentes
- Valores fora do intervalo permitido
- Formato de dados incorreto

**Solu√ß√µes:**
- Verifique a documenta√ß√£o do endpoint para campos obrigat√≥rios
- Valide os tipos e formatos dos dados antes de enviar

### 429 Too Many Requests

```json
{
  "error": "Rate Limit Exceeded",
  "message": "Voc√™ excedeu o limite de requisi√ß√µes",
  "statusCode": 429,
  "retryAfter": 60
}
```

**Limites de rate:**
- **Endpoints p√∫blicos**: 100 requisi√ß√µes por minuto por IP
- **Endpoints autenticados**: 1000 requisi√ß√µes por minuto por API Key

**Solu√ß√µes:**
- Implemente exponential backoff nas suas requisi√ß√µes
- Use o header `Retry-After` para saber quando tentar novamente
- Considere fazer cache de dados que n√£o mudam frequentemente

## Pr√≥ximos passos

Agora que voc√™ sabe como autenticar suas requisi√ß√µes, explore:

<CardGroup cols={2}>
  <Card title="Links de Pagamento" icon="link" href="/pages/guides/features/payment-links">
    Aprenda a criar e gerenciar links de pagamento
  </Card>
  <Card title="Tratamento de Erros" icon="triangle-alert" href="/pages/errors">
    Entenda os c√≥digos de erro e como trat√°-los
  </Card>
  <Card title="In√≠cio R√°pido" icon="rocket" href="/pages/quickstart">
    Fa√ßa sua primeira requisi√ß√£o em minutos
  </Card>
  <Card title="Refer√™ncia da API" icon="book-open" href="/pages/payment-links/reference">
    Documenta√ß√£o completa dos endpoints
  </Card>
</CardGroup>

